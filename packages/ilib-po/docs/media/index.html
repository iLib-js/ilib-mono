<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ilib-po</title><meta name="description" content="Documentation for ilib-po"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ilib-po</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ilib-po</h1></div><div class="tsd-panel tsd-typography"><a id="md:ilib-po" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ilib-po<a href="#md:ilib-po" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A parser and generator for GNU po format files</p>
<a id="md:api-documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">API Documentation<a href="#md:api-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Full API documentation can be found <a href="media/index.md">here</a>.
HTML version can be found <a href="media/index.html">here</a>.</p>
<a id="md:quick-start" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Quick Start<a href="#md:quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Parsing a file in PO format:</p>
<pre><code class="javascript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">POFile</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;ilib-po&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">let</span><span class="hl-1"> </span><span class="hl-2">po</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">POFile</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> = </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">readFileSync</span><span class="hl-1">(</span><span class="hl-3">&#39;path/to/po/file.po&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">translationSet</span><span class="hl-1"> = </span><span class="hl-2">po</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">);</span><br/><br/><span class="hl-8">// resources is now an array of all the resources in the PO file</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">resources</span><span class="hl-1">: </span><span class="hl-7">Resource</span><span class="hl-1">[] = </span><span class="hl-2">translationSet</span><span class="hl-1">.</span><span class="hl-5">getAll</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>Generating a file in PO format:</p>
<pre><code class="javascript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">fs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">TranslationSet</span><span class="hl-1">, </span><span class="hl-2">ResourceString</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;ilib-tools-common&#39;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">POFile</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;ilib-po&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">po</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">POFile</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">translationSet</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">TranslationSet</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">res</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">ResourceString</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">sourceLocale:</span><span class="hl-1"> </span><span class="hl-3">&#39;en-US&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">targetLocale:</span><span class="hl-1"> </span><span class="hl-3">&#39;fr-FR&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">datatype:</span><span class="hl-1"> </span><span class="hl-3">&#39;x-json&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">key:</span><span class="hl-1"> </span><span class="hl-3">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">source:</span><span class="hl-1"> </span><span class="hl-3">&#39;Hello, world!&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">target:</span><span class="hl-1"> </span><span class="hl-3">&#39;Bonjour, le monde!&#39;</span><br/><span class="hl-1">});</span><br/><span class="hl-2">translationSet</span><span class="hl-1">.</span><span class="hl-5">add</span><span class="hl-1">(</span><span class="hl-2">res</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">data</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1"> = </span><span class="hl-2">po</span><span class="hl-1">.</span><span class="hl-5">generate</span><span class="hl-1">(</span><span class="hl-2">translationSet</span><span class="hl-1">);</span><br/><span class="hl-8">// data now contains the contents of the PO file</span><br/><br/><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><span class="hl-3">&#39;path/to/output/file.po&#39;</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">, </span><span class="hl-3">&#39;utf-8&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Make sure to use UTF-8 encoding when reading and writing PO files as they can contain Unicode characters
in the translated files.</p>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Copyright Â© 2024 JEDLSoft</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</p>
<p>See the License for the specific language governing permissions and
limitations under the License.</p>
<a id="md:release-notes" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Release Notes<a href="#md:release-notes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:v110" class="tsd-anchor"></a><h3 class="tsd-anchor-link">v1.1.0<a href="#md:v110" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Added the ability to encode ResourceArray resources. The array elements
are encoded as separate resources with the key of the array resource
and the index of the array element both encoded in new types of comments
in the po file. These are po file format extensions which are mostly
ignored by other po file tools, but are used by the ilib-po parser and
generator to encode the array elements in a reversible way.</li>
<li>The above work with ResourceArray resources now also allow you to add
a key to each resource that is different than source string. This goes
for all resource types, not just arrays.</li>
<li>Fixed a bug where resources that have comments in them which are not
in json format were parsed as if they were json. Now the parser will
only treat comments as json if they start with a '{' character.</li>
</ul>
<a id="md:v100" class="tsd-anchor"></a><h3 class="tsd-anchor-link">v1.0.0<a href="#md:v100" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>extracted code and unit tests from ilib-loctool-po</li>
<li>converted to Typescript</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:ilib-po"><span>ilib-<wbr/>po</span></a><ul><li><a href="#md:api-documentation"><span>API <wbr/>Documentation</span></a></li><li><a href="#md:quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#md:license"><span>License</span></a></li><li><a href="#md:release-notes"><span>Release <wbr/>Notes</span></a></li><li><ul><li><a href="#md:v110"><span>v1.1.0</span></a></li><li><a href="#md:v100"><span>v1.0.0</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ilib-po</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
