<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Resource.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CSharpEscaper.html">CSharpEscaper</a><ul class='methods'><li data-type='method'><a href="CSharpEscaper.html#escape">escape</a></li><li data-type='method'><a href="CSharpEscaper.html#unescape">unescape</a></li></ul></li><li><a href="Escaper.html">Escaper</a><ul class='methods'><li data-type='method'><a href="Escaper.html#escape">escape</a></li><li data-type='method'><a href="Escaper.html#getDescription">getDescription</a></li><li data-type='method'><a href="Escaper.html#getName">getName</a></li><li data-type='method'><a href="Escaper.html#getStyle">getStyle</a></li><li data-type='method'><a href="Escaper.html#unescape">unescape</a></li></ul></li><li><a href="JavaEscaper.html">JavaEscaper</a><ul class='methods'><li data-type='method'><a href="JavaEscaper.html#escape">escape</a></li><li data-type='method'><a href="JavaEscaper.html#unescape">unescape</a></li></ul></li><li><a href="JavascriptEscaper.html">JavascriptEscaper</a><ul class='methods'><li data-type='method'><a href="JavascriptEscaper.html#escape">escape</a></li><li data-type='method'><a href="JavascriptEscaper.html#unescape">unescape</a></li></ul></li><li><a href="JsonEscaper.html">JsonEscaper</a><ul class='methods'><li data-type='method'><a href="JsonEscaper.html#escape">escape</a></li><li data-type='method'><a href="JsonEscaper.html#unescape">unescape</a></li></ul></li><li><a href="Location.html">Location</a><ul class='methods'><li data-type='method'><a href="Location.html#getLocation">getLocation</a></li></ul></li><li><a href="PHPEscaper.html">PHPEscaper</a><ul class='methods'><li data-type='method'><a href="PHPEscaper.html#escape">escape</a></li><li data-type='method'><a href="PHPEscaper.html#unescape">unescape</a></li></ul></li><li><a href="PythonEscaper.html">PythonEscaper</a><ul class='methods'><li data-type='method'><a href="PythonEscaper.html#escape">escape</a></li><li data-type='method'><a href="PythonEscaper.html#unescape">unescape</a></li></ul></li><li><a href="RegexBasedEscaper.html">RegexBasedEscaper</a><ul class='methods'><li data-type='method'><a href="RegexBasedEscaper.html#escape">escape</a></li><li data-type='method'><a href="RegexBasedEscaper.html#unescape">unescape</a></li></ul></li><li><a href="Resource.html">Resource</a><ul class='methods'><li data-type='method'><a href="Resource.html#addInstance">addInstance</a></li><li data-type='method'><a href="Resource.html#clearDirty">clearDirty</a></li><li data-type='method'><a href="Resource.html#escapeText">escapeText</a></li><li data-type='method'><a href="Resource.html#getAutoKey">getAutoKey</a></li><li data-type='method'><a href="Resource.html#getComment">getComment</a></li><li data-type='method'><a href="Resource.html#getContext">getContext</a></li><li data-type='method'><a href="Resource.html#getDNT">getDNT</a></li><li data-type='method'><a href="Resource.html#getDataType">getDataType</a></li><li data-type='method'><a href="Resource.html#getFlavor">getFlavor</a></li><li data-type='method'><a href="Resource.html#getId">getId</a></li><li data-type='method'><a href="Resource.html#getInstances">getInstances</a></li><li data-type='method'><a href="Resource.html#getKey">getKey</a></li><li data-type='method'><a href="Resource.html#getLocalize">getLocalize</a></li><li data-type='method'><a href="Resource.html#getLocation">getLocation</a></li><li data-type='method'><a href="Resource.html#getOrigin">getOrigin</a></li><li data-type='method'><a href="Resource.html#getPath">getPath</a></li><li data-type='method'><a href="Resource.html#getProject">getProject</a></li><li data-type='method'><a href="Resource.html#getSource">getSource</a></li><li data-type='method'><a href="Resource.html#getSourceLocale">getSourceLocale</a></li><li data-type='method'><a href="Resource.html#getState">getState</a></li><li data-type='method'><a href="Resource.html#getTarget">getTarget</a></li><li data-type='method'><a href="Resource.html#getTargetLocale">getTargetLocale</a></li><li data-type='method'><a href="Resource.html#getType">getType</a></li><li data-type='method'><a href="Resource.html#isDirty">isDirty</a></li><li data-type='method'><a href="Resource.html#isInstance">isInstance</a></li><li data-type='method'><a href="Resource.html#same">same</a></li><li data-type='method'><a href="Resource.html#setComment">setComment</a></li><li data-type='method'><a href="Resource.html#setDNT">setDNT</a></li><li data-type='method'><a href="Resource.html#setProject">setProject</a></li><li data-type='method'><a href="Resource.html#setSourceLocale">setSourceLocale</a></li><li data-type='method'><a href="Resource.html#setState">setState</a></li><li data-type='method'><a href="Resource.html#setTargetLocale">setTargetLocale</a></li></ul></li><li><a href="ResourceArray.html">ResourceArray</a><ul class='methods'><li data-type='method'><a href="ResourceArray.html#addSourceItem">addSourceItem</a></li><li data-type='method'><a href="ResourceArray.html#addTargetItem">addTargetItem</a></li><li data-type='method'><a href="ResourceArray.html#cleanHashKey">cleanHashKey</a></li><li data-type='method'><a href="ResourceArray.html#cleanHashKeyForTranslation">cleanHashKeyForTranslation</a></li><li data-type='method'><a href="ResourceArray.html#clone">clone</a></li><li data-type='method'><a href="ResourceArray.html#equals">equals</a></li><li data-type='method'><a href="ResourceArray.html#equals">equals</a></li><li data-type='method'><a href="ResourceArray.html#getSourceArray">getSourceArray</a></li><li data-type='method'><a href="ResourceArray.html#getSourceItem">getSourceItem</a></li><li data-type='method'><a href="ResourceArray.html#getTargetArray">getTargetArray</a></li><li data-type='method'><a href="ResourceArray.html#getTargetItem">getTargetItem</a></li><li data-type='method'><a href="ResourceArray.html#hashKey">hashKey</a></li><li data-type='method'><a href="ResourceArray.html#hashKeyForTranslation">hashKeyForTranslation</a></li><li data-type='method'><a href="ResourceArray.html#isInstance">isInstance</a></li><li data-type='method'><a href="ResourceArray.html#setSource">setSource</a></li><li data-type='method'><a href="ResourceArray.html#setTarget">setTarget</a></li><li data-type='method'><a href="ResourceArray.html#size">size</a></li><li data-type='method'><a href="ResourceArray.html#.hashKey">hashKey</a></li></ul></li><li><a href="ResourcePlural.html">ResourcePlural</a><ul class='methods'><li data-type='method'><a href="ResourcePlural.html#addSourcePlural">addSourcePlural</a></li><li data-type='method'><a href="ResourcePlural.html#addTargetPlural">addTargetPlural</a></li><li data-type='method'><a href="ResourcePlural.html#cleanHashKey">cleanHashKey</a></li><li data-type='method'><a href="ResourcePlural.html#cleanHashKeyForTranslation">cleanHashKeyForTranslation</a></li><li data-type='method'><a href="ResourcePlural.html#clone">clone</a></li><li data-type='method'><a href="ResourcePlural.html#equals">equals</a></li><li data-type='method'><a href="ResourcePlural.html#getAllValidCategories">getAllValidCategories</a></li><li data-type='method'><a href="ResourcePlural.html#getCategories">getCategories</a></li><li data-type='method'><a href="ResourcePlural.html#getClasses">getClasses</a></li><li data-type='method'><a href="ResourcePlural.html#getPivots">getPivots</a></li><li data-type='method'><a href="ResourcePlural.html#getSourcePlural">getSourcePlural</a></li><li data-type='method'><a href="ResourcePlural.html#getSourcePlurals">getSourcePlurals</a></li><li data-type='method'><a href="ResourcePlural.html#getSourceStrings">getSourceStrings</a></li><li data-type='method'><a href="ResourcePlural.html#getTargetPlural">getTargetPlural</a></li><li data-type='method'><a href="ResourcePlural.html#getTargetPlurals">getTargetPlurals</a></li><li data-type='method'><a href="ResourcePlural.html#getTargetStrings">getTargetStrings</a></li><li data-type='method'><a href="ResourcePlural.html#hashKey">hashKey</a></li><li data-type='method'><a href="ResourcePlural.html#hashKeyForTranslation">hashKeyForTranslation</a></li><li data-type='method'><a href="ResourcePlural.html#isInstance">isInstance</a></li><li data-type='method'><a href="ResourcePlural.html#setSource">setSource</a></li><li data-type='method'><a href="ResourcePlural.html#setTarget">setTarget</a></li><li data-type='method'><a href="ResourcePlural.html#size">size</a></li><li data-type='method'><a href="ResourcePlural.html#.hashKey">hashKey</a></li></ul></li><li><a href="ResourceString.html">ResourceString</a><ul class='methods'><li data-type='method'><a href="ResourceString.html#cleanHashKey">cleanHashKey</a></li><li data-type='method'><a href="ResourceString.html#cleanHashKeyForTranslation">cleanHashKeyForTranslation</a></li><li data-type='method'><a href="ResourceString.html#clone">clone</a></li><li data-type='method'><a href="ResourceString.html#equals">equals</a></li><li data-type='method'><a href="ResourceString.html#hashKey">hashKey</a></li><li data-type='method'><a href="ResourceString.html#hashKeyForTranslation">hashKeyForTranslation</a></li><li data-type='method'><a href="ResourceString.html#isInstance">isInstance</a></li><li data-type='method'><a href="ResourceString.html#setSource">setSource</a></li><li data-type='method'><a href="ResourceString.html#setTarget">setTarget</a></li><li data-type='method'><a href="ResourceString.html#size">size</a></li><li data-type='method'><a href="ResourceString.html#.cleanHashKey">cleanHashKey</a></li><li data-type='method'><a href="ResourceString.html#.hashKey">hashKey</a></li></ul></li><li><a href="ResourceXliff.html">ResourceXliff</a><ul class='methods'><li data-type='method'><a href="ResourceXliff.html#getLines">getLines</a></li><li data-type='method'><a href="ResourceXliff.html#getVersion">getVersion</a></li><li data-type='method'><a href="ResourceXliff.html#size">size</a></li></ul></li><li><a href="SmartyEscaper.html">SmartyEscaper</a><ul class='methods'><li data-type='method'><a href="SmartyEscaper.html#escape">escape</a></li><li data-type='method'><a href="SmartyEscaper.html#unescape">unescape</a></li></ul></li><li><a href="SwiftEscaper.html">SwiftEscaper</a><ul class='methods'><li data-type='method'><a href="SwiftEscaper.html#escape">escape</a></li><li data-type='method'><a href="SwiftEscaper.html#unescape">unescape</a></li></ul></li><li><a href="TranslationSet.html">TranslationSet</a><ul class='methods'><li data-type='method'><a href="TranslationSet.html#add">add</a></li><li data-type='method'><a href="TranslationSet.html#addAll">addAll</a></li><li data-type='method'><a href="TranslationSet.html#addSet">addSet</a></li><li data-type='method'><a href="TranslationSet.html#clear">clear</a></li><li data-type='method'><a href="TranslationSet.html#diff">diff</a></li><li data-type='method'><a href="TranslationSet.html#get">get</a></li><li data-type='method'><a href="TranslationSet.html#getAll">getAll</a></li><li data-type='method'><a href="TranslationSet.html#getBy">getBy</a></li><li data-type='method'><a href="TranslationSet.html#getBySource">getBySource</a></li><li data-type='method'><a href="TranslationSet.html#getClean">getClean</a></li><li data-type='method'><a href="TranslationSet.html#getContexts">getContexts</a></li><li data-type='method'><a href="TranslationSet.html#getLocales">getLocales</a></li><li data-type='method'><a href="TranslationSet.html#getProjects">getProjects</a></li><li data-type='method'><a href="TranslationSet.html#isDirty">isDirty</a></li><li data-type='method'><a href="TranslationSet.html#remove">remove</a></li><li data-type='method'><a href="TranslationSet.html#setClean">setClean</a></li><li data-type='method'><a href="TranslationSet.html#size">size</a></li></ul></li><li><a href="TranslationUnit.html">TranslationUnit</a><ul class='methods'><li data-type='method'><a href="TranslationUnit.html#addProperties">addProperties</a></li><li data-type='method'><a href="TranslationUnit.html#addVariant">addVariant</a></li><li data-type='method'><a href="TranslationUnit.html#addVariants">addVariants</a></li><li data-type='method'><a href="TranslationUnit.html#clone">clone</a></li><li data-type='method'><a href="TranslationUnit.html#getProperties">getProperties</a></li><li data-type='method'><a href="TranslationUnit.html#getVariants">getVariants</a></li><li data-type='method'><a href="TranslationUnit.html#hashKey">hashKey</a></li></ul></li><li><a href="TranslationVariant.html">TranslationVariant</a><ul class='methods'><li data-type='method'><a href="TranslationVariant.html#hashKey">hashKey</a></li></ul></li><li><a href="URIEscaper.html">URIEscaper</a><ul class='methods'><li data-type='method'><a href="URIEscaper.html#escape">escape</a></li><li data-type='method'><a href="URIEscaper.html#unescape">unescape</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#cleanString">cleanString</a></li><li><a href="global.html#containsActualText">containsActualText</a></li><li><a href="global.html#convertICUToPluralRes">convertICUToPluralRes</a></li><li><a href="global.html#convertPluralResToICU">convertPluralResToICU</a></li><li><a href="global.html#escapeHex">escapeHex</a></li><li><a href="global.html#escapeRules">escapeRules</a></li><li><a href="global.html#escapeUnicode">escapeUnicode</a></li><li><a href="global.html#escapeUnicodeAsSurrogatePairs">escapeUnicodeAsSurrogatePairs</a></li><li><a href="global.html#escapeUnicodeAstral">escapeUnicodeAstral</a></li><li><a href="global.html#escapeUnicodeExtended">escapeUnicodeExtended</a></li><li><a href="global.html#escapeUnicodeWithBrackets">escapeUnicodeWithBrackets</a></li><li><a href="global.html#escaperFactory">escaperFactory</a></li><li><a href="global.html#formatPath">formatPath</a></li><li><a href="global.html#getLocaleFromPath">getLocaleFromPath</a></li><li><a href="global.html#hashKey">hashKey</a></li><li><a href="global.html#ignoreTags">ignoreTags</a></li><li><a href="global.html#isEmpty">isEmpty</a></li><li><a href="global.html#localizableAttributes">localizableAttributes</a></li><li><a href="global.html#nonBreakingTags">nonBreakingTags</a></li><li><a href="global.html#objectMap">objectMap</a></li><li><a href="global.html#parsePath">parsePath</a></li><li><a href="global.html#selfClosingTags">selfClosingTags</a></li><li><a href="global.html#unescapeHex">unescapeHex</a></li><li><a href="global.html#unescapeOctal">unescapeOctal</a></li><li><a href="global.html#unescapeRules">unescapeRules</a></li><li><a href="global.html#unescapeUnicode">unescapeUnicode</a></li><li><a href="global.html#unescapeUnicodeExtended">unescapeUnicodeExtended</a></li><li><a href="global.html#unescapeUnicodeWithBrackets">unescapeUnicodeWithBrackets</a></li><li><a href="global.html#unindent">unindent</a></li><li><a href="global.html#walk">walk</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Resource.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * Resource.js - super class that represents a resource
 *
 * Copyright © 2022-2024 JEDLSoft
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

const validStates = {
    "new":true,
    "translated":true,
    "accepted":true
}

const translationImportant = [
    "context",
    "datatype",
    "dnt",
    "flavor",
    "project",
    "reskey",
    "resType",
    "sourceLocale",
    "targetLocale"
];


/**
 * @class Represents a resource from a resource file or
 * extracted from the code.
 * @abstract
 */
class Resource {
    /**
     * The type of this resource instance.
     * @type {String | undefined}
     */
    resType;

    /**
     * The source string or strings for the resource.
     * @type {String|Array.&lt;String>|Object}
     */
    source;

    /**
     * The target string or strings for the resource.
     * @type {String|Array.&lt;String>|Object}
     */
    target;

    /**
     * Construct a new Resource instance.
     * The props may contain any
     * of the following properties:
     *
     * &lt;ul>
     * &lt;li>project {String} - the project that this resource is in
     * &lt;li>&lt;i>context&lt;/i> {String} - The context for this resource,
     * such as "landscape mode", or "7200dp", which differentiates it
     * from the base resource that has no special context. The default
     * if this property is not specified is undefined, meaning no
     * context.
     * &lt;li>sourceLocale {String} - the locale of the source resource.
     * &lt;li>targetLocale {String} - the locale of the target resource.
     * &lt;li>key {String} - the unique key of this string, which should include the context
     * of the string
     * &lt;li>pathName {String} - pathName to the file where the string was extracted from
     * &lt;li>autoKey {boolean} - true if the key was generated based on the source text
     * &lt;li>state {String} - current state of the resource (ie. "new", "translated", or "accepted")
     * &lt;li>id {String} - the id of the current resource
     * &lt;li>comment {String} - the comment (translator's note) of this resource
     * &lt;li>dnt {boolean} - Do not translate this resource when this is set to true. Default: false
     * &lt;li>datatype {String} - the type of file that this resource came from
     * &lt;li>flavor {String} - the "flavor" of this string, if any. (Android)
     * &lt;li>location {Location} - the location in the file given in pathName where this this resource
     * is located
     * &lt;/ul>
     *
     * @constructor
     * @param {Object} props properties of the string, as defined above
     */
    constructor(props) {
        if (this.constructor === Resource) {
            throw new Error("Cannot instantiate abstract class Resource!");
        }

        this.autoKey = false;

        if (props) {
            this.project = props.project;
            this.context = props.context || undefined; // avoid the empty string
            this.sourceLocale = props.sourceLocale || props.locale;
            this.targetLocale = props.targetLocale;
            this.reskey = props.key || props.reskey;
            this.pathName = props.pathName;
            this.autoKey = typeof(props.autoKey) === "boolean" ? props.autoKey : false;
            this.state = props.state || undefined;
            this.id = props.id; // the database id
            this.formatted = props.formatted; // for Android layout resources
            this.comment = props.comment;
            this.origin = props.origin || "source";
            this.dnt = props.dnt;
            this.datatype = props.datatype;
            this.sourceHash = props.sourceHash;
            this.localize = typeof(props.localize) === "boolean" ? props.localize : true; // some files have resources we do not want to localize/translate
            this.flavor = props.flavor;
            this.index = props.index;
            this.location = props.location; // optional location of the transunits in the xml file
        }

        this.instances = [];
        this.pathName = this.pathName || "";
        this.dirty = false;
    }

    /**
     * Return the project that this resource was found in.
     *
     * @returns {String} the project of this resource
     */
    getProject() {
        return this.project;
    }

    /**
     * Return the unique key of this resource.
     *
     * @returns {String} the unique key of this resource
     */
    getKey() {
        return this.reskey;
    }

    /**
     * Return the source string or strings for this resource.
     *
     * @returns {String|Array.&lt;String>|Object} the source string or
     * strings of this resource
     */
    getSource() {
        return this.source;
    }

    /**
     * Return the target string or strings for this resource.
     *
     * @returns {String|Array.&lt;String>|Object|undefined} the source string or
     * strings of this resource
     */
    getTarget() {
        return this.target;
    }

    /**
     * Return the resource type of this resource. This is one of
     * string, array, or plural.
     *
     * @returns {String} the resource type of this resource
     */
    getType() {
        return this.resType || "string";
    }

    /**
     * Return the data type of this resource.
     *
     * @returns {String} the data type of this resource
     */
    getDataType() {
        return this.datatype;
    }

    /**
     * Return true if the key of this resource was automatically generated,
     * and false if it was an explicit key.
     *
     * @returns {boolean} true if the key of this string was auto generated,
     * false otherwise
     */
    getAutoKey() {
        return this.autoKey;
    }

    /**
     * Return the context of this resource, or undefined if there
     * is no context.
     * @returns {String|undefined} the context of this resource, or undefined if there
     * is no context.
     */
    getContext() {
        return this.context;
    }

    /**
     * Return the source locale of this resource, or undefined if there
     * is no context or the locale is the same as the project's source locale.
     * @returns {String|undefined} the locale of this resource, or undefined if there
     * is no locale.
     */
    getSourceLocale() {
        return this.sourceLocale || "en-US";
    }

    /**
     * Set the source locale of this resource.
     * @param {String} locale the source locale of this resource
     */
    setSourceLocale(locale) {
        this.sourceLocale = locale || this.sourceLocale;
        this.dirty = true;
    }

    /**
     * Return the target locale of this resource, or undefined if the resource
     * is a source-only resource.
     * @returns {String|undefined} the locale of this resource, or undefined if there
     * is no locale.
     */
    getTargetLocale() {
        return this.targetLocale;
    }

    /**
     * Set the target locale of this resource.
     * @param {String} locale the target locale of this resource
     */
    setTargetLocale(locale) {
        this.targetLocale = locale || this.targetLocale;
        this.dirty = true;
    }

    /**
     * Return the state of this resource. This is a string that gives the
     * stage of life of this resource. Currently, it can be one of "new",
     * "translated", or "accepted".
     *
     * @returns {String} the state of this resource
     */
    getState() {
        return this.state;
    }

    /**
     * Set the project of this resource. This is a string that gives the
     * id of the project for this resource.
     *
     * @param {String} project the project name to set for this resource
     */
    setProject(project) {
        this.project = project;
        this.dirty = true;
    }

    /**
     * Set the state of this resource. This is a string that gives the
     * stage of life of this resource. Currently, it can be one of "new",
     * "translated", or "accepted".
     *
     * @param {String} state the state of this resource
     */
    setState(state) {
        this.state = validStates[state] ? state : this.state;
        this.dirty = true;
    }

    /**
     * Return the original path to the file from which this resource was
     * originally extracted.
     *
     * @returns {String} the path to the file containing this resource
     */
    getPath() {
        return this.pathName;
    }

    /**
     * Return the translator's comment for this resource if there is
     * one, or undefined if not.
     *
     * @returns {String|undefined} the translator's comment for this resource
     * if the engineer put one in the code
     */
    getComment() {
        return this.comment;
    }

    /**
     * Set the translator's comment for this resource.
     *
     * @param {String|undefined} comment the translator's comment to set. Use
     * undefined to clear the comment
     */
    setComment(comment) {
        this.comment = comment;
        this.dirty = true;
    }

    /**
     * Get the "do not translate" flag for this resource.
     *
     * @returns {boolean} true means that the current resource should not
     * be translated, and false means it will be translated.
     */
    getDNT() {
        return typeof(this.dnt) === 'boolean' ? this.dnt : false;
    }

    /**
     * Set the "do not translate" flag for this resource.
     *
     * @param {boolean} flag set the dnt flag to this value
     */
    setDNT(flag) {
        if (typeof(flag) !== 'boolean') {
            throw new TypeError('value must be boolean');
        }
        this.dnt = flag;
        this.dirty = true;
    }

    /**
     * Return the database id if this resource has previously been saved in the
     * database.
     *
     * @returns {number|undefined} the database id if this resource has previously
     * been saved in the database, or undefined if it is has not
     */
    getId() {
        return this.id;
    }

    /**
     * Return the origin of this resource. The origin may be either the string
     * "source" or "target". Source origin resources are ones that are extracted
     * from the source code, whereas target ones are translations from the
     * translators.
     *
     * @returns {String} the origin of this resource
     */
    getOrigin() {
        return this.origin;
    }

    /**
     * Return the localize flag of this resource.
     * This flag indicates whether we should look up a translation for this resource.
     * When false, we should simply substitute the source back
     *
     * @returns {Boolean} the localize flag of this resource
     */
    getLocalize() {
      return this.localize;
    }

    /**
     * Return the name of the flavor for this resource, or undefined
     * for the "main" or default flavor.
     *
     *  @return {String|undefined} the name of the flavor for this
     *  resource or undefined for the main or default flavor
     */
    getFlavor() {
        return this.flavor;
    }

    /**
     * Return true if the other resource represents the same resource as
     * the current one. The project, context, locale, key, flavor, and type must
     * match. Other fields such as the pathName, state, and comment fields are
     * ignored as minor variations.
     *
     * @param {Resource} other another resource to test against the current one
     * @returns {boolean} true if these represent the same resource, false otherwise
     */
    same(other) {
        if (!other) return false;

        const props = ["project", "context", "sourceLocale", "targetLocale", "reskey", "resType", "flavor"];
        for (let i = 0; i &lt; props.length; i++) {
            if (this[props[i]] !== other[props[i]]) {
                return false;
            }
        }

        return true;
    }

    /**
     * Escape text for writing to a database in a SQL command. This puts single
     * quotes around the string, and makes sure that all single quotes within
     * the string are escaped.
     *
     * @param {Object} str the item to escape
     * @returns {String} the escaped string
     */
    escapeText(str) {
        switch (typeof(str)) {
        case "string":
            // unescape first, then re-escape to make everything consistent
            return "'" + str.replace(/\\'/g, "'").replace(/'/g, "\\'") + "'";
        case "undefined":
            return "NULL";
        case "boolean":
            return str ? "TRUE" : "FALSE";
        default:
            if (str === null) {
                return "NULL";
            }
            return str.toString();
        }
    }

    /**
     * Add an instance of the same resource to the list of
     * instances. If the given resource matches the
     * current instance in all properties that affect the
     * possible translation, and differs from the current
     * instance by some property that does not affect
     * its translation, it will be added as an instance of
     * the same string. The following properties affect the
     * translation:
     *
     * &lt;ul>
     * &lt;li>context&lt;/li>
     * &lt;li>datatype&lt;/li>
     * &lt;li>dnt&lt;/li>
     * &lt;li>flavor&lt;/li>
     * &lt;li>project&lt;/li>
     * &lt;li>reskey&lt;/li>
     * &lt;li>resType&lt;/li>
     * &lt;li>source&lt;/li>
     * &lt;li>sourceHash&lt;/li>
     * &lt;li>sourceArray&lt;/li>
     * &lt;li>sourceLocale&lt;/li>
     * &lt;li>targetLocale&lt;/li>
     * &lt;/ul>
     *
     * Differences in other properties, such as "comment" or
     * "origin" are considered instances of the same resource.
     *
     * If this method is given a resource that differs from
     * the current one by one of the above translation affecting
     * properties, it is not added to the list of instances. This
     * can be checked easily by calling the isInstance() method.
     *
     * @param {Resource} resource an instance of the current resource to
     * record
     * @returns {boolean} true if the instance was added, and
     * and false otherwise
     */
    addInstance(resource) {
        if (!this.isInstance(resource)) {
            return false;
        }
        const unique = this !== resource &amp;&amp; this.instances.every(res => {
            return res !== resource;
        });
        if (!unique) {
            return false;
        }
        this.instances.push(resource);
        this.dirty = true;
        return true;
    }

    /**
     * Check if the given resource is an instance of the current
     * resource. This method returns true if all properties which
     * affect the possible translation match between the given and
     * the current resource.
     *
     * @param {Resource} resource a resource to check
     * @returns {boolean} true if this is an instance of
     * the current resource, false otherwise.
     */
    isInstance(resource) {
        if (typeof(resource) !== 'object' || !(resource instanceof Resource)) {
            return false;
        }

        return translationImportant.every(prop => {
            return this[prop] === resource[prop];
        });
    }

    /**
     * Return the list of instances of the current resource.
     *
     * @returns {Array.&lt;Resource>} the list of instances of
     * the current resource
     */
    getInstances() {
        return this.instances;
    }

    /**
     * Return true if this instance has been modified since its creation, and false otherwise.
     */
    isDirty() {
        return this.dirty
    }

    /**
     * Clear the dirty flag. This is used for example when the Resource was
     * written to disk and the modifications are already recorded, allowing
     * new modifications later.
     */
    clearDirty() {
        this.dirty = false;
    }

    /**
     * Return the location of the resource instance in the original file where it was read
     * from. This is usually an object containing a line and a char property which gives the
     * line number and character within that line where the representation of the resource
     * instance starts.
     *
     * @returns {Location|undefined} the location information, or undefined if no location
     * information is available
     */
    getLocation() {
        return this.location?.getLocation();
    }
}

export default Resource;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Mon Mar 03 2025 22:01:57 GMT-0800 (Pacific Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
